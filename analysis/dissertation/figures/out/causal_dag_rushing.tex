% Causal DAG for NFL Rushing Performance
% Shows causal relationships between confounders, treatment, and outcome

\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
  node distance=2.5cm and 3cm,
  % Define accent color
  every node/.style={draw=accent!60, rounded corners, line width=0.6pt, align=center, minimum width=2.2cm, minimum height=0.8cm},
  arrow/.style={->, line width=0.6pt, >=stealth},
  confounder/.style={fill=accent!8},
  treatment/.style={fill=green!15, line width=0.8pt},
  outcome/.style={fill=orange!15, line width=0.8pt}
]
  % Define accent color
  \definecolor{accent}{RGB}{31,119,180}

% Nodes
\node[confounder] (ability) {Player\\Ability};
\node[confounder, right=of ability] (team) {Team\\Quality};
\node[confounder, below right=1cm and 0.5cm of team] (opponent) {Opponent\\Defense};
\node[confounder, below=of ability] (script) {Game\\Script};

\node[treatment, below=2.5cm of team] (carries) {\textbf{Carries}\\(Treatment)};
\node[outcome, right=of carries] (yards) {\textbf{Rushing Yards}\\(Outcome)};

% Confounding arrows
\draw[arrow, accent!60] (ability) -- (carries);
\draw[arrow, accent!60] (ability) -- (yards);

\draw[arrow, accent!60] (team) -- (carries);
\draw[arrow, accent!60] (team) -- (script);
\draw[arrow, accent!60] (team) -- (yards);

\draw[arrow, accent!60] (opponent) -- (carries);
\draw[arrow, accent!60] (opponent) -- (yards);

\draw[arrow, accent!60] (script) -- (carries);

% Causal effect of interest
\draw[arrow, green!60, very thick] (carries) -- node[above, draw=none, fill=white] {Causal Effect} (yards);

% Backdoor paths (dashed)
\draw[arrow, dashed, red!50, bend left=20] (ability) to (yards);
\draw[arrow, dashed, red!50, bend left=10] (team) to (yards);
\draw[arrow, dashed, red!50, bend right=10] (opponent) to (yards);

% Legend
\node[draw=none, below=0.3cm of yards, anchor=north east, align=left, font=\small] {
  \textcolor{accent!80}{$\blacksquare$} Confounders \\
  \textcolor{green!80}{$\blacksquare$} Treatment \\
  \textcolor{orange!80}{$\blacksquare$} Outcome \\
  \textcolor{red!60}{- - -} Backdoor paths (blocked by adjustment)
};

\end{tikzpicture}
\caption{Causal DAG for NFL Rushing Performance. Solid arrows represent causal relationships. Dashed red paths show confounding backdoor paths from treatment (carries) to outcome (yards) that must be blocked via adjustment. Minimal adjustment set: \{Player Ability, Team Quality, Opponent Defense\}. Game Script is a collider (affected by Team Quality) and should NOT be conditioned on to avoid inducing bias.}
\label{fig:causal-dag-rushing}
\end{figure}
