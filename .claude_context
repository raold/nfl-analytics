# Claude Context File for NFL Analytics Project

## Project Overview
This is an NFL analytics project with a three-agent coordination model.

## Subagent System
We use three specialized agents:
1. **DevOps Agent** - Infrastructure, database, deployment
2. **ETL Agent** - Data pipelines, ingestion, quality
3. **Research/Analytics Agent** - Modeling, features, dissertation (R + Python + LaTeX)

## Key Documentation
- **Quick Reference**: docs/agent_context/SUBAGENT_QUICK_REFERENCE.md (START HERE)
- **DevOps Handbook**: docs/agent_context/SUBAGENT_DEVOPS.md
- **ETL Handbook**: docs/agent_context/SUBAGENT_ETL.md
- **Research Handbook**: docs/agent_context/SUBAGENT_RESEARCH_ANALYTICS.md
- **Coordination Guide**: docs/agent_context/SUBAGENT_COORDINATION.md
- **Full Index**: docs/agent_context/README.md

## How to Use This File
When starting a new Claude session:

1. Tell Claude which agent you are:
   "I'm working as the [DevOps/ETL/Research] Agent today."

2. Claude should read:
   - .claude_context (this file)
   - docs/agent_context/SUBAGENT_QUICK_REFERENCE.md
   - Your specific agent handbook

3. Reference handoffs in docs/agent_context/handoffs/ when coordinating

## Current State (Update this as needed)
- Date: October 4, 2025
- Active work: [Describe what you're currently working on]
- Current agent mode: [DevOps/ETL/Research]
- Blockers: [Any current blockers]

## Quick Commands by Agent

### DevOps
- Start DB: docker compose up -d pg
- Check status: docker compose ps
- View logs: docker compose logs -f pg
- Reset DB: bash scripts/dev/reset_db.sh

### ETL
- Ingest schedules: Rscript --vanilla R/ingestion/ingest_schedules.R
- Ingest PBP: Rscript --vanilla R/ingestion/ingest_pbp.R
- Refresh views: psql $DATABASE_URL -c "REFRESH MATERIALIZED VIEW mart.game_summary;"

### Research
- Generate features: python py/features/asof_features.py --output analysis/features/asof_team_features.csv --validate
- Run backtest: python py/backtest/baseline_glm.py --start-season 2003 --end-season 2024
- Compile dissertation: cd analysis/dissertation/ && pdflatex main.tex

## Project Structure
```
nfl-analytics/
├── docs/agent_context/     # Agent documentation (READ THESE)
├── etl/                    # ETL framework
├── py/                     # Python code (features, models, risk)
├── R/                      # R code (ingestion, features, analysis)
├── db/                     # Database migrations, views
├── data/                   # Data files (raw, staging, processed)
├── analysis/               # Dissertation, papers, results
├── models/                 # Trained models
└── infrastructure/         # Docker configs
```

## Important Notes
- Always check which agent you are before taking action
- Use handoff templates in docs/agent_context/handoffs/templates/
- Update this file when project state changes significantly
- Check docs/agent_context/SUBAGENT_QUICK_REFERENCE.md for "who does what"

## Getting Started in New Session
1. Read this file
2. Read docs/agent_context/SUBAGENT_QUICK_REFERENCE.md
3. Declare which agent you are
4. Review your agent's handbook if needed
5. Check for any active handoffs in docs/agent_context/handoffs/active/
